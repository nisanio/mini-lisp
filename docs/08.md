# Chapter 8 — Built-ins and Standard Library

## 8.1 Overview

Mini Lisp ships with a core set of built-in functions written in C (`builtins.[ch]`) and a higher-level standard library written in Lisp (`stdlib.lisp`). Together, they provide the essential primitives for programming in the language.

## 8.2 Categories of Built-ins

### 8.2.1 Arithmetic and Comparison

* `+`, `-`, `*`, `/`, `%`
* `abs`, `max`, `min`
* Relational operators: `=`, `<`, `>`, `<=`, `>=`

### 8.2.2 Lists

* `cons`, `car`, `cdr`
* `list`, `append`, `length`
* Predicates: `null?`, `pair?`

### 8.2.3 Equality and Predicates

* `eq?` — identity check
* `boolean?`, `symbol?`, `string?`, `number?`, etc.

### 8.2.4 Strings, Vectors, Hash Tables

* Construction and access functions for each type.
* Mutation supported where applicable (e.g., `vector-set!`).

### 8.2.5 I/O

* `print` — human-readable output
* `write` — escaped output
* File operations: `read-file`, `write-file`, `append-file`, `file-exists?`

### 8.2.6 Macro Utilities

* `macroexpand-1`
* `macroexpand`

## 8.3 Error Handling Built-ins

* Report invalid arguments, type errors, or misuse of special forms.
* Errors are printed to stderr and evaluation continues with `nil`.

## 8.4 Standard Library (`stdlib.lisp`)

### 8.4.1 Thunked Conditionals

* `when-fn`, `unless-fn`, `cond*` — implemented with lambdas (evaluate thunks).

### 8.4.2 Recommended Macro Replacements

With macro support, these thunked forms can be replaced with cleaner macros:

* `when`
* `unless`
* `and`
* `or`
* `cond`

### 8.4.3 Utility Functions

* List processing: `map`, `filter`, `fold`
* Higher-order functions: `compose`, `identity`

## 8.5 Example

```lisp
(define-syntax when
  (syntax-rules ()
    ((when test body ...) (if test (begin body ...) nil))))

(when #t (print "hello")) ; prints "hello"
```

## 8.6 Role in Examples

Example programs (`examples/`) import `stdlib.lisp` and use its helpers. With macros enabled, many existing examples can be simplified by replacing `when-fn`/`unless-fn` with macro equivalents.

---

Next chapter: **REPL and Program Execution (`repl.c`, `main.c`)**.
