# Chapter 12 — Build, Portability, and CI

## 12.1 Build System

* **Makefile** is provided for compilation.
* Default target builds the `minilisp` binary from all `.c` sources.
* Object files are generated in the same directory.
* Example commands:

  ```bash
  make       # build
  make clean # remove objects and binary
  ```

## 12.2 Compiler Flags

* Uses `-Wall -Wextra` for warnings.
* Targets C11 standard for portability.
* May include `-g` for debugging builds.

## 12.3 Portability Considerations

* **`xstrdup`**: Replaces non-standard `strdup` for strict C environments.
* **`__attribute__((unused))`**: Applied selectively to silence unused warnings in GCC/Clang; guarded for portability.
* **Integer types**: Explicit 64-bit integers for consistency across platforms.
* **File I/O**: Relies only on standard C library functions.

## 12.4 Supported Platforms

* Designed for Unix-like systems (Linux, macOS, BSD).
* Should compile on Windows with MinGW or MSVC after minor adjustments (conditional attributes).

## 12.5 Cleaning and Temporary Files

* `make clean` removes object files and `minilisp` binary.
* Diagnostic `.lisp` files (e.g., `tmp_*.lisp`) are temporary and can be deleted manually or added to `.gitignore`.

## 12.6 Continuous Integration (Future)

* Add GitHub Actions or similar workflow:

  * Build on Linux and macOS.
  * Run all tests in `tests/`.
  * Check warnings as errors (`-Werror`) to enforce strictness.

## 12.7 Example Makefile Snippet

```make
CC = gcc
CFLAGS = -std=c11 -Wall -Wextra -g
OBJS = main.o repl.o reader.o value.o env.o eval.o syntax.o macros.o builtins.o

minilisp: $(OBJS)
	$(CC) $(CFLAGS) -o $@ $(OBJS)

clean:
	rm -f $(OBJS) minilisp
```

---

Next chapter: **Testing and Examples** — structure of the test suite and example programs.
